FROM python:3.11-slim

# ğŸ› ï¸ CÃ i cÃ´ng cá»¥ há»‡ thá»‘ng + Java
RUN apt-get update && apt-get install -y \
    openjdk-11-jdk \
    build-essential \
    curl \
    && rm -rf /var/lib/apt/lists/*

# ğŸŒ Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng Java cho PySpark
ENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64
ENV PATH="$JAVA_HOME/bin:$PATH"

# ğŸ—‚ï¸ Táº¡o thÆ° má»¥c lÃ m viá»‡c
WORKDIR /app

# ğŸ“¦ Copy toÃ n bá»™ project
COPY . .

# ğŸ CÃ i thÆ° viá»‡n Python
RUN pip install --no-cache-dir pyspark python-dotenv kafka-python

# ğŸš€ Lá»‡nh máº·c Ä‘á»‹nh náº¿u cáº§n
CMD tail -f /dev/null
